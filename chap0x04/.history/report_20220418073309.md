# 实验四 shell脚本编程练习基础
---
## 实验要求
* **继承第一章：Linux基础（实验）的所有实验报告要求**
* **上述任务的所有源代码文件必须单独提交并提供详细的–help脚本内置帮助信息**
* **任务二的所有统计数据结果要求写入独立实验报告**
---
## 实验内容
* **任务一:用bash编写一个图片批处理脚本,实现以下功能:**
- [X] 支持命令行参数方式使用不同功能
- [X] 支持对指定目录下所有支持格式的图片文件进行批处理
- [X] 支持以下常见图片批处理功能的单独使用或组合使用
    * 支持对jpeg格式图片进行图片质量压缩
    * 支持对jpeg/png/svg格式图片在保持原始宽高比的前提下压缩分辨率
    * 支持对图片批量添加自定义文本水印
    * 支持批量重命名(统一添加文件名前缀或后缀,不影响原始文件扩展名)
    * 支持将png/svg图片统一转换为jpg格式图片

* **任务二:用bash编写一个文本批处理脚本,对以下附件分别进行批量处理完成相应的数据统计任务:**
- [X] 统计不同年龄区间范围(20岁以下、[20-30]、30岁以上)的球员数量、百分比
- [X] 统计不同场上位置的球员数量、百分比
- [X] 名字最长的球员是谁?名字最短的球员是谁?
- [X] 年龄最大的球员是谁?年龄最小的球员是谁?
  

* **任务二:用bash编写一个文本批处理脚本,对以下附件分别进行批量处理完成相应的数据统计任务:**
- [X] 统计访问来源主机TOP100和分别对应出现的总次数
- [X] 统计访问来源主机TOP100P和分别对应出现的总次数
- [X] 统计最频繁被访问的 URL TOP100
- [X] 统计不同响应状态码的出现次数和对应百分比
- [X] 分别统计不同4XX状态码对应的TOP10URL和对应出现的总次数
- [X] 给定URL输出TOP100访问来源主机
---
## 实验过程
* 任务一
    首先安装`ImageMagick`，用来处理图片文件；
    ```bash
    sudo apt-get install ImageMagick
    ```
    接着把需要处理的图片文件复制到虚拟机；
    然后创建脚本`scripts.sh`，按照任务一的要求编写脚本。
<br>

* 任务二
    创建任务二的脚本`scripts2.sh`；
    将需要处理的文件下载至本地。
    ```bash
    wget "https://c4pr1c3.gitee.io/linuxsysadmin/exp/chap0x04/worldcupplayerinfo.tsv"
    ```
<br>

* 任务三
    创建任务三的脚本`scripts3.sh`；
    将需要处理的文件下载至本地；
    ```bash
    wget "https://c4pr1c3.gitee.io/linuxsysadmin/exp/chap0x04/worldcupplayerinfo.tsv"
    ```
    并解压该文件。
<br>

---
## 遇到的问题及解决办法
* 遇到问题1：安装`Imagemagick`后执行脚本`scripts.sh`会发现出现报错`bash:ls:command not found`并且Imagemagick中的工具`convert``rm`等也都会出现相同的报错。

    解决办法：在搜索引擎上查询问题，看到了这样的文章
    [Error 'convert':command not found ' when using exec(convert) in PHP script](https://stackoverflow.com/questions/61091033/error-convert-command-not-found-when-using-execconvert-in-php-script),学习之后思考可能是我的脚本文件和Imagemagick的路径部署出现了问题